import java.util.*;
import java.io.File;
import java.io.*;
import java.io.IOException;
import java.io.OutputStream;
import java.io.FileInputStream;
import java.awt.Color;
import java.sql.*;

import net.sf.jasperreports.engine.JREmptyDataSource;
import net.sf.jasperreports.engine.JRDataSource;
import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JRRectangle;
import net.sf.jasperreports.engine.JRStyle;
import net.sf.jasperreports.engine.JasperExportManager;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.engine.JasperCompileManager;
import net.sf.jasperreports.engine.JasperReport;
import net.sf.jasperreports.engine.util.JRLoader;
import net.sf.jasperreports.engine.util.JRSaver;
import net.sf.jasperreports.engine.JasperPrintManager;
import net.sf.jasperreports.engine.data.JRXmlDataSource;


import net.sf.jasperreports.engine.design.*;
import net.sf.jasperreports.engine.xml.*;



public class CreatePDF{
       
        
/**
	 *
	 */
	private static void usage()
	{
		System.out.println( "CreatePDF usage:" );
		System.out.println( "\tjava CreatePDF -Ffile" );
             System.out.println( "\tjava CreatePDF -FoneReport.jrxml" );
	}

public static void main(String args[]) {
           String fileName = null;

           if(args.length == 0){
	         usage();
	         return;
                 }
             int k = 0;
		while ( args.length > k )
		{
			if ( args[k].startsWith("-F") )
				fileName = args[k].substring(2);
			
			k++;
		}
    try {//compile sub jasper
        JasperCompileManager jcm = new JasperCompileManager();
                             jcm.compileReportToFile("oneReport.jrxml","oneReport.jasper");
                             
        JasperDesign jasperDesign = JRXmlLoader.load(fileName);
        JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);

        JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, null, 
            new JRXmlDataSource("oneData.xml", "/XpcJRDataSource/DSRows"));

	  File destFile = new File("oneReport.jrprint");

	  JRSaver.saveObject(jasperPrint, destFile);

        JasperExportManager.exportReportToPdfFile(jasperPrint,"oneReport.pdf");

	  System.err.println("Success!");
				
             }
             catch (JRException e)
		{
			e.printStackTrace();
			System.exit(1);
		}
		catch (Exception e)
		{
			e.printStackTrace();
			System.exit(1);
		}
            
          }
}
